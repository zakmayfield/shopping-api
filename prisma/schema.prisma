generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model HQAddress {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  address         String
  apartment       String?
  city            String
  stateOrProvince String
  zip             String
  country         String

  hqs HQ[]
}

model HQ {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  name String

  address   HQAddress? @relation(fields: [addressId], references: [id])
  addressId Int?
  // each HQ has an address, which is stored in its own table HQAddress
  // this means an HQ can be created without setting an address initially (flexible)

  stores Store[]
}

model StoreAddress {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  address         String
  apartment       String?
  city            String
  stateOrProvince String
  zip             String
  country         String

  stores Store[]
  // array with store associated to this id ( i believe )
}

model Store {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  name String @unique
  // name of store / shop / branch

  hq   HQ?  @relation(fields: [hqId], references: [id])
  hqId Int?
  // each store will be run by a HQ

  address   StoreAddress? @relation(fields: [addressId], references: [id])
  addressId Int?
  // same deal with HQ having an address

  inventory Product[]
  // array containing all products associated to this store
}

model Discount {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  name        String
  // '10% off order'
  description String?
  // activating this discount will grant you 10% off of your first order
  expiresIn   String? // 2d, 3w, 4m, 1y // {number}{string: d | w | m | y}
  // once activated this discount will be active for a set time
  percent     Int?
  // percentage off i.e {10}
  isActive    Boolean @default(false)
  // this discount needs to be active in order for members to use

  discountedProducts Product[]
  // this will spit out an array of products using this specific discount
}

model Category {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  name String  @unique
  code String?

  products Product[]
}

model Product {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  store   Store? @relation(fields: [storeId], references: [id])
  storeId Int?

  discount   Discount? @relation(fields: [discountId], references: [id])
  discountId Int?

  category   Category? @relation(fields: [categoryId], references: [id])
  categoryId Int?
}

// default to this if i mess something up

// model Store {
//   id        Int      @id @default(autoincrement())
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   name String @unique

//   inventory Product[]
//   employees Employee[]
// }

// model Discount {
//   id        Int      @id @default(autoincrement())
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   name        String?
//   description String?
//   percent     Int?    @default(0)
//   expiresIn   String? // 2d 3w 4m 1y {number}{d / w / m / y}

//   products Product[]
// }

// model Member {
//   id        Int      @id @default(autoincrement())
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   username String  @unique
//   email    String  @unique
//   password String
//   points   Int?
//   token    String?

//   cart         Cart[]
//   orderDetails OrderDetails[]
// }

// model Employee {
//   id        Int      @id @default(autoincrement())
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   name  String
//   email String
//   title String?
//   pay   Int?    @default(0)

//   store   Store @relation(fields: [storeId], references: [id])
//   storeId Int
// }

// model Product {
//   id        Int      @id @default(autoincrement())
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   name             String
//   description      String
//   price            Int?
//   isDiscountActive Boolean @default(false)

//   store      Store     @relation(fields: [storeId], references: [id])
//   storeId    Int
//   discount   Discount? @relation(fields: [discountId], references: [id])
//   discountId Int?

//   cartItem   CartItem[]
//   orderItems OrderItems[]
// }

// model Cart {
//   id        Int      @id @default(autoincrement())
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   total Int? @default(0)

//   member   Member? @relation(fields: [memberId], references: [id])
//   memberId Int?

//   products CartItem[]
// }

// model CartItem {
//   id        Int      @id @default(autoincrement())
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   quantity Int

//   cart   Cart? @relation(fields: [cartId], references: [id])
//   cartId Int?

//   product   Product? @relation(fields: [productId], references: [id])
//   productId Int?
// }

// model MemberPayment {
//   id Int @id @default(autoincrement())
// }

// model PaymentDetails {
//   id        Int      @id @default(autoincrement())
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   amount   Int
//   provider String
//   status   String

//   orderDetails OrderDetails[]
// }

// model OrderDetails {
//   id        Int      @id @default(autoincrement())
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   total Int

//   member   Member? @relation(fields: [memberId], references: [id])
//   memberId Int?

//   paymentDetails   PaymentDetails? @relation(fields: [paymentDetailsId], references: [id])
//   paymentDetailsId Int?

//   orderItems OrderItems[]
// }

// model OrderItems {
//   id        Int      @id @default(autoincrement())
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   orderDetails   OrderDetails? @relation(fields: [orderDetailsId], references: [id])
//   orderDetailsId Int?

//   product   Product? @relation(fields: [productId], references: [id])
//   productId Int?
// }
